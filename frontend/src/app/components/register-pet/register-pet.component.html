<div class="form-container">
  <h2 class="form-title">Registro de Mascotas</h2>

  <!-- Alertas -->
  <div *ngIf="alertMessage" class="alert" [ngClass]="alertType">
    {{ alertMessage }}
    <button
      type="button"
      class="btn-close"
      (click)="dismissAlert()"
      aria-label="Close"
    ></button>
  </div>

  <form
    [formGroup]="petForm"
    (ngSubmit)="onSubmit()"
    enctype="multipart/form-data"
    class="pet-form"
  >
    <div class="form-group">
      <label for="nombre" class="form-label">Nombre</label>
      <input
        type="text"
        id="nombre"
        formControlName="nombre"
        class="form-control"
        [ngClass]="{ 'is-invalid': isFieldInvalid('nombre') }"
      />
      <div *ngIf="isFieldInvalid('nombre')" class="invalid-feedback">
        Por favor ingrese el nombre de la mascota
      </div>
    </div>

    <div class="form-group">
      <label for="edad" class="form-label">Edad (años)</label>
      <input
        type="number"
        id="edad"
        formControlName="edad"
        class="form-control"
        [ngClass]="{ 'is-invalid': isFieldInvalid('edad') }"
        min="0"
      />
      <div *ngIf="isFieldInvalid('edad')" class="invalid-feedback">
        {{ getErrorMessage("edad") }}
      </div>
    </div>

    <div class="form-group">
      <label for="raza" class="form-label">Raza</label>
      <input
        type="text"
        id="raza"
        formControlName="raza"
        class="form-control"
        [ngClass]="{ 'is-invalid': isFieldInvalid('raza') }"
      />
      <div *ngIf="isFieldInvalid('raza')" class="invalid-feedback">
        Por favor ingrese la raza de la mascota
      </div>
    </div>

    <div class="form-group">
      <label for="color" class="form-label">Color</label>
      <input
        type="text"
        id="color"
        formControlName="color"
        class="form-control"
        [ngClass]="{ 'is-invalid': isFieldInvalid('color') }"
      />
      <div *ngIf="isFieldInvalid('color')" class="invalid-feedback">
        Por favor ingrese el color de la mascota
      </div>
    </div>

    <div class="form-group">
      <label for="tipo" class="form-label">Tipo de mascota</label>
      <select
        id="tipo"
        formControlName="tipo"
        class="form-select"
        [ngClass]="{ 'is-invalid': isFieldInvalid('tipo') }"
      >
        <option value="" disabled>Seleccione un tipo</option>
        <option value="Perro">Perro</option>
        <option value="Gato">Gato</option>
        <option value="Pez">Pez</option>
        <option value="Loro">Loro</option>
        <option value="Hamster">Hamster</option>
        <option value="Otro">Otro</option>
      </select>
      <div *ngIf="isFieldInvalid('tipo')" class="invalid-feedback">
        Por favor seleccione el tipo de mascota
      </div>
    </div>

    <div class="form-group">
      <label for="descripcion">Descripción</label>
      <textarea
        id="descripcion"
        formControlName="descripcion"
        class="form-control"
        rows="3"
      ></textarea>
    </div>

    <div class="form-group">
      <label for="foto">Foto de la mascota</label>
      <input
        type="file"
        id="foto"
        (change)="onFileChange($event)"
        accept="image/*"
        class="form-control"
      />
      <div *ngIf="previewUrl" class="image-preview mt-3">
        <img [src]="previewUrl" alt="Vista previa" class="preview-image" />
        <button type="button" class="btn-remove-image" (click)="removeImage()">
          <i class="bi bi-x-circle"></i>
        </button>
      </div>
      <small class="form-text text-muted"
        >Formatos aceptados: JPG, PNG (Max 2MB)</small
      >
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary">
        <i class="bi bi-save"></i> Registrar Mascota
      </button>
      <button
        type="button"
        class="btn btn-outline-secondary"
        (click)="resetForm()"
      >
        <i class="bi bi-arrow-counterclockwise"></i> Limpiar
      </button>
    </div>
  </form>
</div>
